<div class="section-contact-background">
    <div class="section-contatct-parent container-xxl py-3">
        <div class="section-contact">
            <div class="group-image-contact">
                <div class="ecrm">
                    <h3>eCRM</h3>
                    <img src="{{asset('assets/file/ecrm.png')}}" alt="">
                </div>
                <div class="global-market">
                    <div class="title-market">
                        <h3>Global Market Target</h3>
                        <span>$1,250.00</span>
                    </div>
                    <div class="group-stonks">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div>
                <div class="contact-client">
                    <h3>1000+</h3>
                    <span>Clients</span>
                </div>
            </div>
            <div class="parent-contact box-border">
                <div class="contact-groups">
                    <div class="svg-full" class="position-relative d-flex justify-content-center align-items-end">
                        <div class="parent-contact-child">
                            <div class="alat-contact">
                                <img src="{{ asset('assets/file/Group 1321314495 - svg.png') }}" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="content-contact-parent position-relative">
                        <img class="img-bg" src="{{asset('assets/file/group-contact.png')}}" alt="">
                        <div class="content-contact">
                            <div class="content-contact-text">
                                <div class="content-contact-title">Connect with <br>Our Sales Team</div>
                                <div class="content-contact-desc">We're dedicated to providing the best solutions for your business needs</div>
                            </div>
                            <div class="button-contact-group">
                                <a class="left-button-contact"  href="{{ url('contact-us') }}">Contact Us <svg viewBox="0 0 13 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M3.12497 0.548389C2.70932 0.964038 3.19883 3.01139 3.94894 3.99497C4.4733 4.6823 4.47686 4.75003 3.98874 4.75003C2.98121 4.75042 0.756432 5.93083 0.763759 6.46134C0.772472 7.09719 2.97507 8.19383 4.2438 8.19383H4.92915L4.39073 8.69681C3.72537 9.3184 3.18715 10.5012 3.05249 11.6378L2.95071 12.4986H3.48478C4.81944 12.4986 6.65986 11.4669 7.06838 10.4895C7.37987 9.74376 7.40422 9.76316 7.32957 10.7C7.24323 11.7852 7.56462 12.9521 8.21611 13.9191C8.89097 14.9205 9.02701 14.9288 9.70246 14.01C11.2288 11.9347 11.0033 9.9901 8.99196 7.88413C8.56681 7.43897 8.12641 6.90035 8.01334 6.68728C7.90027 6.47401 7.66759 6.29975 7.4963 6.29975C7.17848 6.29975 6.61649 5.79836 6.61233 5.51142C6.61115 5.4241 6.12678 5.12033 5.53608 4.83617C4.19924 4.19299 3.49903 3.18466 3.37824 1.729C3.28913 0.654925 3.30854 0.64443 4.6537 1.04404C6.7157 1.65632 8.61077 5.02884 7.13115 5.45321C6.84006 5.53677 6.80105 5.58212 7.01056 5.5938C7.63551 5.62845 8.26344 6.11183 8.56166 6.78807C9.52464 8.97087 12.8284 8.13463 12.6007 5.76569C12.4639 4.34032 11.2027 3.43555 9.83237 3.77952C9.25097 3.92546 8.33651 4.90706 8.33651 5.38548C8.33651 5.6041 8.2674 5.78311 8.18284 5.78311C7.96027 5.78311 7.82027 5.33102 7.81829 4.60686C7.81631 3.88467 7.18719 2.44802 6.60817 1.84385C5.91232 1.11751 3.46577 0.207592 3.12497 0.548389ZM11.7672 4.59101C12.6966 5.52053 12.4371 6.98451 11.2324 7.60749C9.76761 8.36493 7.99631 6.5847 8.75513 5.11736C9.37375 3.92111 10.8409 3.66467 11.7672 4.59101ZM6.61154 5.98034C8.24126 7.18531 4.41389 8.48532 2.33625 7.43244C0.832867 6.67065 0.80673 6.29005 2.20853 5.57479C3.71745 4.80508 5.20756 4.94231 6.61154 5.98034ZM7.7266 6.97659C7.84542 7.16887 7.59432 7.34353 6.78679 7.63026C5.86559 7.9574 5.81331 7.89561 6.546 7.34472C7.2563 6.81065 7.56462 6.71461 7.7266 6.97659ZM8.59908 7.86274C8.68978 8.14869 7.95591 9.3992 7.69729 9.3992C7.6066 9.3992 7.8171 7.66254 7.93136 7.46967C8.05373 7.26254 8.49017 7.51957 8.59908 7.86274ZM9.6086 9.02672C10.5694 10.4133 10.6383 11.6398 9.84326 13.1969C9.14543 14.5634 8.98404 14.6111 8.36403 13.6337C7.28442 11.9313 7.26422 10.4988 8.29908 9.03523C8.88503 8.20671 9.03949 8.20572 9.6086 9.02672Z" fill="#22333C"/>
                                    </svg>
                                </a>
                                <a style="#" onclick="saveOrderNow()" class="right-button-contact">Order Now <img src="{{asset('assets/file/LogoDanmogot2.png')}}" alt=""></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function saveOrderNow(){
        var clientIP = "{{ \Illuminate\Support\Facades\Request::getClientIp(true) }}";
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(position => {
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;
                var geocodeUrl = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`;

                $.getJSON(geocodeUrl, data => {
                    if (data && data.address) {
                        var city = data.address.county || data.address.city;
                        var country = data.address.country;

                        if (city && country) {
                            var device = '';
                            const userAgent = navigator.userAgent;

                            if (userAgent.includes("Chrome")) {
                                device = "Chrome";
                            } else if (userAgent.includes("Firefox")) {
                                device = "Firefox";
                            } else if (userAgent.includes("Safari")) {
                                device = "Safari";
                            } else if (userAgent.includes("Edge")) {
                                device = "Edge";
                            } else if (userAgent.includes("Trident")) {
                                device = "Trident";
                            } else {
                                device = "Unknown";
                            }

                            var headers = {
                                'url': 'module/visitor/store'
                            };
                            var params = {
                                page             : 'Order Now',
                                location_country : country,
                                location_city    : city,
                                device           : device,
                                ip_addr          : clientIP,
                            };

                            $.ajax({
                                url: "{{ route('api.post') }}",
                                type: 'POST',
                                data: params,
                                headers: headers,
                                beforeSend: function() {
                                },
                                success: function(response) {
                                    console.log(response);
                                },
                                error: function(xhr, ajaxOptions, thrownError) {
                                    console.log('error');
                                }
                            });
                        } else {
                            console.log("City and country not found in the location data.");
                        }
                    }
                }).fail(() => {
                    console.log("Error in retrieving geocoding data.");
                });
            }, error => {
                if (error.code === error.PERMISSION_DENIED) {
                    console.log("Location access denied by the user.");
                } else {
                    console.log("Error in retrieving location.");
                }
            });
        } else {
            console.log("Geolocation is not supported by this browser.");
        }
    }
</script>
